<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuddyBot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="chat-container">
    <div class="chat-header">
        <div class="bot-info">
            <div class="bot-avatar">ðŸ¤–</div>
            <div>
                <h2>BuddyBot</h2>
                <span class="status">Online</span>
            </div>
        </div>
        <button onclick="clearChat()" class="clear-btn">Clear</button>
    </div>

    <div id="chat-box" class="chat-box">
        <div class='bot-message'>Hey! I'm BuddyBot. How can I help you today? ðŸ‘‹</div>
    </div>

    <div class="input-area">
        <input type="text" id="user-input" placeholder="Type your message here..." onkeypress="handleKeyPress(event)">
        <button onclick="sendMessage()">Send</button>
    </div>
</div>

<script>
function sendMessage() {
    let input = document.getElementById("user-input");
    let message = input.value.trim();
    
    if (message === "") return;
    
    let chatBox = document.getElementById("chat-box");
    chatBox.innerHTML += `<div class='user-message'>${message}</div>`;
    
    fetch("/get", {
        method: "POST",
        headers: {"Content-Type": "application/x-www-form-urlencoded"},
        body: "message=" + encodeURIComponent(message)
    })
    .then(response => response.json())
    .then(data => {
        chatBox.innerHTML += `<div class='bot-message'>${data.reply}</div>`;
        chatBox.scrollTop = chatBox.scrollHeight;
    });
    
    input.value = "";
}

function handleKeyPress(event) {
    if (event.key === "Enter") {
        sendMessage();
    }
}

function clearChat() {
    let chatBox = document.getElementById("chat-box");
    chatBox.innerHTML = `<div class='bot-message'>Chat cleared! How can I help you? ðŸ˜Š</div>`;
}
</script>

</body>
</html>